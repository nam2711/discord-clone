(this["webpackJsonpdiscord-clone"]=this["webpackJsonpdiscord-clone"]||[]).push([[0],{71:function(e,c,n){},75:function(e,c,n){},76:function(e,c,n){},77:function(e,c,n){},79:function(e,c,n){},83:function(e,c,n){},84:function(e,c,n){},85:function(e,c,n){},86:function(e,c,n){"use strict";n.r(c);var a=n(3),s=n(2),t=n.n(s),i=n(21),r=n.n(i),l=(n(71),n(13)),o=(n(75),n(31)),d=(n(76),n(77),n(44)),j=n.n(d),h=n(48),b=n.n(h),u=n(49),m=n.n(u),O=n(50),p=n.n(O),x=n(51),f=n.n(x),v=n(52),g=n.n(v);var _=function(e){var c=e.channelName;return Object(a.jsxs)("div",{className:"chatHeader",children:[Object(a.jsx)("div",{className:"chatHeader__left",children:Object(a.jsxs)("h3",{children:[Object(a.jsx)("span",{className:"chatHeader__hash",children:"#"}),c]})}),Object(a.jsxs)("div",{className:"chatHeader__right",children:[Object(a.jsx)(j.a,{}),Object(a.jsx)(b.a,{}),Object(a.jsx)(m.a,{}),Object(a.jsxs)("div",{className:"chatHeader__search",children:[Object(a.jsx)("input",{placeholder:"Search"}),Object(a.jsx)(p.a,{})]}),Object(a.jsx)(f.a,{}),Object(a.jsx)(g.a,{})]})]})},N=n(53),S=n.n(N),I=n(54),C=n.n(I),w=n(55),k=n.n(w),y=n(56),z=n.n(y),D=(n(79),n(100));var H=function(e){var c=e.timestamp,n=e.message,s=e.user;return Object(a.jsxs)("div",{className:"message",children:[Object(a.jsx)(D.a,{src:s.photo}),Object(a.jsxs)("div",{className:"message__info",children:[Object(a.jsxs)("h4",{children:[s.displayName,Object(a.jsx)("span",{className:"message_timestamp",children:new Date(null===c||void 0===c?void 0:c.toDate()).toUTCString()})]}),Object(a.jsxs)("p",{children:[" ",n]})]})]})},B=n(23),E=Object(B.b)({name:"app",initialState:{channelId:null,channelName:null},reducers:{setChannelInfo:function(e,c){e.channelId=c.payload.channelId,e.channelName=c.payload.channelName}}}),M=E.actions.setChannelInfo,A=function(e){return e.app.channelId},L=function(e){return e.app.channelName},P=E.reducer,T=Object(B.b)({name:"user",initialState:{user:null},reducers:{login:function(e,c){e.user=c.payload},logout:function(e){e.user=null}}}),U=T.actions,F=U.login,W=U.logout,J=function(e){return e.user.user},R=T.reducer,V=n(25),G=V.a.initializeApp({apiKey:"AIzaSyDk58815hP5QgMLxhHFoMUCOP3YedTnpbo",authDomain:"discord-clone-4766c.firebaseapp.com",databaseURL:"https://discord-clone-4766c.firebaseio.com",projectId:"discord-clone-4766c",storageBucket:"discord-clone-4766c.appspot.com",messagingSenderId:"965989347277",appId:"1:965989347277:web:f3d7eeae68694229319e84"}).firestore(),K=V.a.auth(),Q=new V.a.auth.GoogleAuthProvider,Y=G;var $=function(){var e=Object(l.c)(A),c=Object(l.c)(J),n=Object(l.c)(L),t=Object(s.useState)(""),i=Object(o.a)(t,2),r=i[0],d=i[1],j=Object(s.useState)([]),h=Object(o.a)(j,2),b=h[0],u=h[1];return Object(s.useEffect)((function(){e&&Y.collection("channels").doc(e).collection("messages").orderBy("timestamp","desc").onSnapshot((function(e){return u(e.docs.map((function(e){return e.data()})))}))}),[e]),Object(a.jsxs)("div",{className:"chat",children:[Object(a.jsx)(_,{channelName:n}),Object(a.jsx)("div",{className:"chat__messages",children:b.map((function(e){return Object(a.jsx)(H,{timestamp:e.timestamp,message:e.message,user:e.user})}))}),Object(a.jsxs)("div",{className:"chat__input",children:[Object(a.jsx)(S.a,{fontSize:"large"}),Object(a.jsxs)("form",{children:[Object(a.jsx)("input",{value:r,onChange:function(e){return d(e.target.value)},placeholder:"Message #".concat(n)}),Object(a.jsx)("button",{disabled:!e,className:"chat__inputButton",type:"submit",onClick:function(n){n.preventDefault(),Y.collection("channels").doc(e).collection("messages").add({timestamp:V.a.firestore.FieldValue.serverTimestamp(),message:r,user:c}),d("")},children:"Send Message"})]}),Object(a.jsxs)("div",{className:"chat__inputIcons",children:[Object(a.jsx)(C.a,{fontSize:"large"}),Object(a.jsx)(k.a,{fontSize:"large"}),Object(a.jsx)(z.a,{fontSize:"large"})]})]})]})},q=(n(83),n(37)),X=n.n(q),Z=n(57),ee=n.n(Z);n(84);var ce=function(e){var c=e.id,n=e.channelName,s=Object(l.b)();return Object(a.jsx)("div",{className:"sidebarChannel",onClick:function(){return s(M({channelId:c,channelName:n}))},children:Object(a.jsxs)("h4",{children:[Object(a.jsx)("span",{className:"sidebarChannel__hash",children:"# "}),n]})})},ne=n(58),ae=n.n(ne),se=n(60),te=n.n(se),ie=n(59),re=n.n(ie),le=n(61),oe=n.n(le),de=n(62),je=n.n(de),he=n(63),be=n.n(he);var ue=function(){var e=Object(l.c)(J),c=Object(s.useState)([]),n=Object(o.a)(c,2),t=n[0],i=n[1];return Object(s.useEffect)((function(){Y.collection("channels").onSnapshot((function(e){return i(e.docs.map((function(e){return{id:e.id,channel:e.data()}})))}))}),[]),Object(a.jsxs)("div",{className:"sidebar",children:[Object(a.jsxs)("div",{className:"sidebar__top",children:[Object(a.jsx)("h3",{children:"Nam Nam"}),Object(a.jsx)(X.a,{})]}),Object(a.jsxs)("div",{className:"sidebar__channels",children:[Object(a.jsxs)("div",{className:"sidebar__channelsHeader",children:[Object(a.jsxs)("div",{className:"sidebar__header",children:[Object(a.jsx)(X.a,{}),Object(a.jsx)("h4",{children:"Text Channels"})]}),Object(a.jsx)(ee.a,{onClick:function(){var e=prompt("Enter a new channel name");e&&Y.collection("channels").add({channelName:e})},className:"sidebar__addChannel"})]}),Object(a.jsx)("div",{className:"sidebar__channelsList",children:t.map((function(e){var c=e.id,n=e.channel;return Object(a.jsx)(ce,{id:c,channelName:n.channelName},c)}))})]}),Object(a.jsxs)("div",{className:"sidebar__voice",children:[Object(a.jsx)(ae.a,{className:"sidebar__voiceIcon",fontSize:"large"}),Object(a.jsxs)("div",{className:"sidebar__voiceInfo",children:[Object(a.jsx)("h3",{children:" Voice Connected"}),Object(a.jsx)("p",{children:"Stream"})]}),Object(a.jsxs)("div",{className:"sidebar__voiceIcons",children:[Object(a.jsx)(re.a,{}),Object(a.jsx)(te.a,{})]})]}),Object(a.jsxs)("div",{className:"sidebar__profile",children:[Object(a.jsx)(D.a,{onClick:function(){return K.signOut()},src:e.photo}),Object(a.jsxs)("div",{className:"sidebar__profileInfo",children:[Object(a.jsx)("h3",{children:e.displayName}),Object(a.jsxs)("p",{children:["#",e.uid.substring(0,5)]})]}),Object(a.jsxs)("div",{className:"sidebar__profileIcons",children:[Object(a.jsx)(oe.a,{}),Object(a.jsx)(je.a,{}),Object(a.jsx)(be.a,{})]})]})]})},me=n(99);n(85);var Oe=function(){return Object(a.jsxs)("div",{className:"login",children:[Object(a.jsx)("div",{className:"login__logo",children:Object(a.jsx)("img",{src:"https://upload.wikimedia.org/wikipedia/sco/thumb/9/98/Discord_logo.svg/603px-Discord_logo.svg.png",alt:""})}),Object(a.jsx)(me.a,{onClick:function(){K.signInWithPopup(Q).catch((function(e){return alert(e.message)}))},children:"Sign In"})]})};var pe=function(){var e=Object(l.b)(),c=Object(l.c)(J);return Object(s.useEffect)((function(){K.onAuthStateChanged((function(c){console.log("user is",c),e(c?F({uid:c.uid,photo:c.photoURL,email:c.email,displayName:c.displayName}):W())}))}),[e]),Object(a.jsx)("div",{className:"app",children:c?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(ue,{}),Object(a.jsx)($,{})]}):Object(a.jsx)(Oe,{})})},xe=Object(B.a)({reducer:{user:R,app:P}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(Object(a.jsx)(t.a.StrictMode,{children:Object(a.jsx)(l.a,{store:xe,children:Object(a.jsx)(pe,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[86,1,2]]]);
//# sourceMappingURL=main.509ed42e.chunk.js.map